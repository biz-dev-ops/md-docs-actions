name: md-docs GitHub pages

description: Deploy generated website to GitHub pages

inputs:

  theme: 
    description: Path to a theme css file.
    required: false
  
  azure_credentials:
    description: Azure credentials used to login.
    required: false

  azure_storage_account:
    description: Name of the Azure storage account.
    required: false

  azure_execution_storage_container:
    description: Name of the Azure storage test test-executions container inside the storage acount.
    required: false

  github_token:
    description: Github token generated by the runner.
    required: true

  github_pages_destination_directory:
    description: Directory where to deploy the generated website. Defaults to empty which is the root.
    required: false

runs:

  using: composite

  steps:
    
    - name: Build
      uses: synionnl/md-docs-actions/build@main
      with:
          theme: ${{ inputs.theme }}
          azure_credentials: ${{ inputs.azure_credentials }}
          azure_storage_account: ${{ inputs.azure_storage_account }}
          azure_execution_storage_container: ${{ inputs.azure_execution_storage_container }}

    - name: Deploy to GitHub pages
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ inputs.github_token }}
        publish_dir: dist
        destination_dir: ${{ inputs.github_pages_destination_directory }}
